<title>PTC | Trajets</title>

  <div user-pop></div>
  <div ride-pop></div>

<section>
  <div my-nav></div>

  <div class="main-wrapper">

    <div class="well" ng-init="simple = true">
      <h2>Les Trajets</h2>
    </div>
    <div ng-show="simple">
      <input class="form-control" placeholder="Rechercher..." type="text" ng-model="rideFilter">
    </div>
    <div ng-hide="simple">
      <form>
        <fieldset>
          <div class="s-component">
            <select class="form-control" ng-model="search.departure" ng-option="departure.name for departure in departures">
              <option value="">-- Lieu de Départ --</option>
            </select>
          </div>
          <div class="s-component">
            <select class="form-control" ng-model="search.arrival" ng-option="arrival.name for arrival in arrivals">
              <option value="">-- Lieu d'Arrivée --</option>
            </select>
          </div>
          <div class="s-component">
            <div datepicker></div>
          </div>
      </fieldset>
      <div style="clear: both"></div>
        <a href="" class="btn btn-success" ng-click="searchRide(search,dt | date:'shortDate')">Rechercher</a>
    </form>
    </div>
    <br/>
    <em class="text-success">Recherchez ce que vous voulez sur les trajets,
      si l'un d'entre correspond à votre saisie, il remontra tout seul! Ou bien, affinez votre recherche ci-dessous.</em>
    <br/><br/>
    <a href="" class="btn btn-primary" ng-click="simple = false" ng-show="simple">Recherche Affinée</a>
    <a href="" class="btn btn-primary" ng-click="simple = true" ng-hide="simple">Recherche Simple</a>

    <hr/>

    <div class="panel panel-default content" ng-repeat="ride in rides | filter:rideFilter">
      <div class="panel-body">
        <table class="table-inbox">
          <tr>
            <td class="cell-s">
              <a href="" ng-click="userPreview(ride.driver)">
                <img src="toolbox/asset/images/default.png" width="100" height="100"/>
              </a>
            </td>
            <td>
              <p>Proposé par : {{ ride.driver.lastname | uppercase }} {{ ride.driver.firstname }}</p>
              <p><b>{{ ride.departure.name }}</b><i class="fa fa-arrow-right fa-1x"></i><b>{{ ride.arrival.name }}</b></p>
              <p>Le : {{  ride.departure_date | date:'yyyy-MM-dd' }}, à {{ }}</p>
              <p>Places Disponibles : {{ ride.remain }}</p>
            </td>
            <td>
              <a href="" class="btn btn-primary" ng-click="askForSeat(ride)">Je m'inscris !</a><!-- ng-show="ride.seats > 0 && !user_is_passenger" -->
              <a href="" class="btn btn-primary disabled">Complet</a><!-- ng-show="ride.seats == 0 && !user_is_passenger" -->
            </td>
          </tr>
        </table>
    </div>
  </div>

  <div class="panel panel-default box" ng-show="details">
          <div class="panel-heading">
            <a href="" ng-click="details = false" ng-show="details">Moins <i class="fa fa-chevron-up fa-1x"></i></a>
            <a href="" ng-click="details = true" ng-hide="details">Plus <i class="fa fa-chevron-down fa-1x"></i></a>
          </div>


          <div class="panel-body" ng-repeat="passenger in rides.passengers">
              <h3>Les Passagers : </h3>
              <ul>
                <li> {{ passenger.lastname | uppercase}} {{ passenger.firstname }} - Bureau : {{ passenger.site.name }}</li>
              </ul>
          </div>

          <div class="panel-body">

          </div>
        </div>

  </div>
</section>
